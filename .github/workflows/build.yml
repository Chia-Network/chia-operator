name: Build Operator and CA generator

on:
  push:
    branches:
      - '*'
      - '!main'
  workflow_dispatch:

permissions:
  id-token: write
  contents: read
  packages: write

jobs:
  package:
    uses: Chia-Network/actions/.github/workflows/docker-build.yaml@docker-context

  package-ca-gen:
    uses: Chia-Network/actions/.github/workflows/docker-build.yaml@docker-context
    with:
      docker-context: "./chiaca-generator"
      dockerfile: "./chiaca-generator/Dockerfile"
      image_subpath: "ca-gen"
