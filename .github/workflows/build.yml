name: Build Operator and CA generator

on:
  push:
    branches:
      - '*'
      - '!main'

  workflow_dispatch:

permissions:
  id-token: write
  contents: read
  packages: write

jobs:
  package:
    uses: Chia-Network/actions/.github/workflows/docker-build.yaml@subpath-option-docker-build

  package-ca:
    uses: Chia-Network/actions/.github/workflows/docker-build.yaml@subpath-option-docker-build
    with:
      image-subpath: "ca-gen"
